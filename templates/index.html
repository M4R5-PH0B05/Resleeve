<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Resleeve</title>
</head>
<body>
<div class="row">
    <div class="column">
        <h1>Welcome to Resleeve</h1>
        <form method="post">
            <label for="artist">Artist:</label><br>
            <input type="text" id ="artist" name="artist"><br>
            <label for="album">Album:</label><br>
            <input type="text" id ="album" name="album"><br>
            <br>
            <input type="submit" id="submit" value="Submit"><br>
        </form>

        <h1>Options</h1>
        {% if releases %}
            <h2>Choose a release:</h2>
            {% for option_number, release in releases.items() %}
                <div>
                    <h3>{{option_number}}</h3>
                    <img src="{{release['Cover Image']}}" width="200px" height="200px">
                    <p>Artist: {{release['Artist']}}</p>
                    <p>Album: {{release['Title']}}</p>
                    <p>Country: {{release['Country']}}</p>
                    <p>Track Count: {{release['Track Count']}}</p>
                    <p>MBID: {{release['MBID']}}</p>
                    <form method="post">
                        <input type="hidden" name="selected_artist" value="{{release['Artist']}}">
                        <input type="hidden" name="selected_album" value="{{release['Title']}}">
                        <input type="hidden" name="selected_date" value="{{release['Date']}}">
                        <input type="hidden" name="selected_country" value="{{release['Country']}}">
                        <input type="hidden" name="selected_track_count" value="{{release['Track Count']}}"><input type="hidden" name="selected_MBID" value="{{release['MBID']}}">
                        <input type="hidden" name="selected_format" value="{{release['Format']}}">
                        <input type="hidden" name="selected_type" value="{{release['Release Type']}}">
                        <input type="hidden" name="selected_barcode" value="{{release['Barcode']}}">
                        <input type="submit" id="submit-1" value="Select This Release"><br>
                    </form>

                </div>
                <hr>
            {% endfor %}
        {% endif %}
    </div>
    <div class="column">
        <h1>Testing</h1>
        <br>
        <h3>Chosen Album: </h3>
        <img src="{{selected_cover_image}}" width="200px" height="200px">
        <p>Artist: {{selected_artist}}</p>
        <p>Album: {{selected_album}}</p>
        <p>Country: {{selected_country}}</p>
        <p>Track Count: {{selected_track_count}}</p>
        <p>MBID: {{selected_mbid}}</p>
        {% if tracklist %}
        <ol>
            {% for track_num,track_data in tracklist.items() %}
            <li> {{track_data['title']}} | {{track_data['length']}}</li>
            {% endfor %}
        </ol>
        {% endif %}
        <h4>Template Style</h4>
        <form method="post">
            <input type="hidden" name="selected_details" value="{{selected_details}}">
            <input type="radio" id="white" name="templateSelector" value="white" checked="checked">
            <label for="white">White</label>
            <input type="radio" id="black" name="templateSelector" value="dark">
            <label for="black">Dark</label>
        <h4>Background Colour</h4>
        <div class="background-option">
            <input type="radio" id="default" name="backgroundSelector" value="default" checked="checked">
            <label for="default">Default</label>
        </div>

        <div class="background-option">
            <input type="radio" id="gradient" name="backgroundSelector" value="gradient">
            <label for="gradient">Gradient</label>
            <div class="gradient-picker">
                <div class="gradient-column">
                    <p class="picker-title">Start colour</p>
                    <div class="swatch-list">
                        {% if gradient_colours %}
                            {% for colour in gradient_colours %}
                                <div class="swatch-option">
                                    <button type="button" class="swatch-button" data-gradient-target="start" data-color="{{ colour }}" style="background-color: {{ colour }};"></button>
                                    <span class="swatch-label">{{ colour }}</span>
                                </div>
                            {% endfor %}
                        {% else %}
                            <p class="swatch-empty">Select a release to see colour suggestions.</p>
                        {% endif %}
                    </div>
                    <input type="text" id="gradient-start-input" name="gradient_start" placeholder="#fffaec">
                </div>
                <div class="gradient-column">
                    <p class="picker-title">End colour</p>
                    <div class="swatch-list">
                        {% if gradient_colours %}
                            {% for colour in gradient_colours %}
                                <div class="swatch-option">
                                    <button type="button" class="swatch-button" data-gradient-target="end" data-color="{{ colour }}" style="background-color: {{ colour }};"></button>
                                    <span class="swatch-label">{{ colour }}</span>
                                </div>
                            {% endfor %}
                        {% else %}
                            <p class="swatch-empty">Select a release to see colour suggestions.</p>
                        {% endif %}
                    </div>
                    <input type="text" id="gradient-end-input" name="gradient_end" placeholder="#ff11aa">
                </div>
            </div>
        </div>

        <div class="background-option">
            <input type="radio" id="custom" name="backgroundSelector" value="custom">
            <label for="custom">Custom</label>
            <input type="text" name="custom" />
        </div>
        <br><br>
        <input type="submit" id="submit2" value="Submit">
        </form>
    </div>
</div>
<style>
    .row {
  display: flex;
}

.column {
  flex: 50%;
}

.background-option {
  margin-bottom: 12px;
}

.gradient-picker {
  display: flex;
  gap: 24px;
  margin-top: 12px;
}

.gradient-column {
  flex: 1;
}

.picker-title {
  margin-bottom: 8px;
  font-weight: bold;
}

.swatch-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px 12px;
  margin-bottom: 8px;
  align-items: center;
}

.swatch-option {
  display: flex;
  align-items: center;
  gap: 6px;
}

.swatch-button {
  width: 32px;
  height: 32px;
  border: 1px solid #444;
  border-radius: 4px;
  cursor: pointer;
  padding: 0;
}

.swatch-label {
  font-size: 12px;
  font-family: monospace;
}

.swatch-empty {
  font-size: 14px;
  color: #555;
}

#gradient-start-input,
#gradient-end-input {
  width: 100%;
  padding: 6px;
  box-sizing: border-box;
}
</style>
<script>
(function () {
  var swatchButtons = document.querySelectorAll('.swatch-button');
  var startInput = document.getElementById('gradient-start-input');
  var endInput = document.getElementById('gradient-end-input');

  swatchButtons.forEach(function (button) {
    button.addEventListener('click', function () {
      var target = button.getAttribute('data-gradient-target');
      var colour = button.getAttribute('data-color');
      if (target === 'start' && startInput) {
        startInput.value = colour;
      }
      if (target === 'end' && endInput) {
        endInput.value = colour;
      }
    });
  });
})();
</script>
</body>
</html>
