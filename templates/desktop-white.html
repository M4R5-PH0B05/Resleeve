<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop White</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Helvetica, Arial, sans-serif;
            background: #FFFAEC;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .container {
            width: 2060px;
            height: 1440px;
            background: #FFFAEC;
            position: relative;
            transform-origin: 0 0;
            transform: scale(0.5);
        }

        .album-cover {
            position: absolute;
            left: 63px;
            top: 57px;
            width: 680px;
            height: 680px;
            {#background-image: url({{ url_for('static', filename='fallen.jpg') }});#}
            background-color: grey;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .artist-name {
            position: absolute;
            left: 61px;
            top: 767px;
            font-family: Helvetica, sans-serif;
            font-size: 30px;
            font-weight: normal;
            color: black;
        }

        .album-title {
            position: absolute;
            left: 56px;
            top: 811px;
            font-family: Helvetica, sans-serif;
            font-size: 96px;
            font-weight: bold;
            color: black;
        }

        .color-palette {
            position: absolute;
            top: 860px;
            display: flex;
            gap: 8px;
        }

        .color-1 {
            left: 472px;
            width: 39px;
            height: 39px;
            background-color: #e6f1f7;
            position: absolute;
            top: 862px;
        }

        .color-2 {
            left: 530px;
            width: 39px;
            height: 39px;
            background-color: #738eb4;
            position: absolute;
            top: 862px;
        }

        .color-3 {
            left: 588px;
            width: 39px;
            height: 39px;
            background-color: #3f6fa2;
            position: absolute;
            top: 860px;
        }

        .color-4 {
            left: 646px;
            width: 39px;
            height: 39px;
            background-color: #171233;
            position: absolute;
            top: 860px;
        }

        .color-5 {
            left: 704px;
            width: 39px;
            height: 39px;
            background-color: #060606;
            position: absolute;
            top: 860px;
        }

        .separator-line {
            position: absolute;
            left: 63px;
            top: 941px;
            width: 94%;
            height: 5px;
            background-color: #000000;
        }

        .track-list {
            position: absolute;
            left: 858px;
            top: 57px;
            width: 508px;
        }

        .track-item {
            position: relative;
            height: 117px;
            margin-bottom: 29px;
            overflow: hidden;
        }

        .track-number {
            position: absolute;
            left: 0;
            top: 37px;
            transform: translateY(-50%);
            font-family: Helvetica, sans-serif;
            font-size: 35px;
            font-weight: bold;
            color: black;
            text-align: center;
            width: 48px;
        }

        .track-title {
            position: absolute;
            left: 60px;
            top: 15px;
            font-family: Helvetica, sans-serif;
            font-size: 35px;
            font-weight: bold;
            color: black;
            width: 311px;
            line-height: 1.2;
        }

        .track-duration {
            position: absolute;
            left: 63px;
            top: 74px;
            font-family: Helvetica, sans-serif;
            font-size: 24px;
            font-weight: normal;
            color: #3c3c3c;
        }

        .track-date {
            position: absolute;
            left: 128px;
            top: 74px;
            font-family: Helvetica, sans-serif;
            font-size: 24px;
            font-weight: normal;
            color: #3c3c3c;
        }

        .track-separator {
            position: absolute;
            left: 62px;
            top: 108px;
            width: 100%;
            height: 10px;
            background-color: #ddd;
        }

        .track-progress {
            position: absolute;
            left: 62px;
            top: 108px;
            height: 10px;
            background-color: #303030;
        }

        .track-list-right {
            position: absolute;
            left: 1491px;
            top: 57px;
            width: 508px;
        }

        .album-info {
            position: absolute;
            top: 979px;
            display: flex;
            gap: 206px;
            left: 374px;
        }

        .info-item {
            text-align: left;
        }

        .info-label {
            font-family: Helvetica, sans-serif;
            font-size: 24px;
            font-weight: bold;
            color: black;
            margin-bottom: 8px;
        }

        .info-value {
            font-family: Helvetica, sans-serif;
            font-size: 24px;
            font-weight: normal;
            color: black;
        }

        .barcode-image {
            position: absolute;
            left: 49px;
            top: 910px;
            width: 298px;
            height: 198px;
            background-image: url({{ url_for('static', filename='barcode.png') }});
            background-size: contain;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Album Cover -->
        <div class="album-cover"></div>

        <!-- Artist and Album Title -->
        {% if artist %}
            <div class="artist-name">Evanescence</div>
            <div class="album-title">Fallen</div>
        {% else %}
            <div class="artist-name">Artist</div>
            <div class="album-title">Album</div>
        {% endif %}
        <!-- Color Palette -->
        <div class="color-1"></div>
        <div class="color-2"></div>
        <div class="color-3"></div>
        <div class="color-4"></div>
        <div class="color-5"></div>

        <!-- Separator Line -->
        <div class="separator-line"></div>
{% if tracklist %}
    {% set tracks = tracklist.keys() | sort %}
    {% set total_tracks = tracks | length %}
    {% if total_tracks > 20 %}
        {% set tracks = tracks[:20] %}
        {% set total_tracks = 20 %}
    {% endif %}
    {% set half = ((total_tracks) / 2) | round(0, 'ceil') | int %}
{% else %}
    {% set total_tracks = 12 %}
    {% set half = 6 %}
{% endif %}

<!-- Calculate dynamic sizing -->
{% set available_height = 700 %}
{% set track_height = (available_height / half) | round(0) | int %}
{% set font_scale = (track_height / 117) %}
{% set title_font = (35 * font_scale) | round(0) | int %}
{% set duration_font = (24 * font_scale) | round(0) | int %}
{% set number_font = (35 * font_scale) | round(0) | int %}
{% set title_width = [200, (311 * font_scale) | round(0) | int] | max %}

<!-- Track List Left Column -->
<div class="track-list">
    {% for i in range(half) %}
        {% if tracklist %}
            {% set track_num = tracks[i] %}
            {% set track_data = tracklist[track_num] %}
        {% else %}
            {% set track_num = i + 1 %}
            {% set track_data = {'title': 'Track ' + (track_num | string), 'length': 'N/A'} %}
        {% endif %}

        <div class="track-item" style="height: {{ track_height }}px; margin-bottom: {{ (29 * font_scale) | round(0) | int }}px;">
            <div class="track-number" style="font-size: {{ number_font }}px; top: {{ (track_height * 0.3) | round(0) | int }}px;">{{ track_num }}.</div>
            <div class="track-title" style="font-size: {{ title_font }}px; top: {{ (track_height * 0.13) | round(0) | int }}px; width: {{ title_width }}px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ track_data.title }}</div>
            <div class="track-duration" style="font-size: {{ duration_font }}px; top: {{ (track_height * 0.63) | round(0) | int }}px;">{{ track_data.length }}</div>
            <div class="track-date" style="font-size: {{ duration_font }}px; top: {{ (track_height * 0.63) | round(0) | int }}px;">{% if tracklist %}{{ track_data.get('date', 'N/A') }}{% else %}N/A{% endif %}</div>
            <div class="track-separator" style="top: {{ (track_height * 0.92) | round(0) | int }}px; height: {{ (10 * font_scale) | round(0) | int }}px;"></div>
            <div class="track-progress" style="top: {{ (track_height * 0.92) | round(0) | int }}px; height: {{ (10 * font_scale) | round(0) | int }}px; width: {% if tracklist and track_data.length != 'N/A' %}{{ (track_data.length.split(':')[0] | int * 60 + track_data.length.split(':')[1] | int) * 1.4 * font_scale }}px{% else %}{{ (200 * font_scale) | round(0) | int }}px{% endif %};"></div>
        </div>
    {% endfor %}
</div>

<!-- Track List Right Column -->
<div class="track-list-right">
    {% for i in range(half, total_tracks) %}
        {% if tracklist %}
            {% set track_num = tracks[i] %}
            {% set track_data = tracklist[track_num] %}
        {% else %}
            {% set track_num = i + 1 %}
            {% set track_data = {'title': 'Track ' + (track_num | string), 'length': 'N/A'} %}
        {% endif %}

    <div class="track-item" style="height: {{ track_height }}px; margin-bottom: {{ (29 * font_scale) | round(0) | int }}px;">
        <div class="track-number" style="font-size: {{ number_font }}px; top: {{ (track_height * 0.3) | round(0) | int }}px;">{{ track_num }}.</div>
        <div class="track-title" style="font-size: {{ title_font }}px; top: {{ (track_height * 0.13) | round(0) | int }}px; width: {{ title_width }}px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ track_data.title }}</div>
        <div class="track-duration" style="font-size: {{ duration_font }}px; top: {{ (track_height * 0.63) | round(0) | int }}px;">{{ track_data.length }}</div>
        <div class="track-date" style="font-size: {{ duration_font }}px; top: {{ (track_height * 0.63) | round(0) | int }}px;">{% if tracklist %}{{ track_data.get('date', 'N/A') }}{% else %}N/A{% endif %}</div>
        <div class="track-separator" style="top: {{ (track_height * 0.92) | round(0) | int }}px; height: {{ (10 * font_scale) | round(0) | int }}px;"></div>
        <div class="track-progress" style="top: {{ (track_height * 0.92) | round(0) | int }}px; height: {{ (10 * font_scale) | round(0) | int }}px; width: {% if tracklist and track_data.length != 'N/A' %}{{ (track_data.length.split(':')[0] | int * 60 + track_data.length.split(':')[1] | int) * 1.4 * font_scale }}px{% else %}{{ (200 * font_scale) | round(0) | int }}px{% endif %};"></div>
    </div>
    {% endfor %}
</div>
        {%  if release_date %}
            <!-- Album Information Footer -->
            <div class="album-info">
                <div class="info-item">
                    <div class="info-label">Release Date</div>
                    <div class="info-value">March 4th, 2003</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Run Time</div>
                    <div class="info-value">44:07</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Track Count</div>
                    <div class="info-value">12 Tracks</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Genre</div>
                    <div class="info-value">Nu Metal</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Format</div>
                    <div class="info-value">CD</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Type</div>
                    <div class="info-value">Album</div>
                </div>
            </div>
        {%  else %}
            <!-- Album Information Footer -->
            <div class="album-info">

                <div class="info-item">
                    <div class="info-label">Release Date</div>
                    <div class="info-value">N/A</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Run Time</div>
                    <div class="info-value">N/A</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Track Count</div>
                    <div class="info-value">N/A</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Genre</div>
                    <div class="info-value">N/A</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Format</div>
                    <div class="info-value">N/A</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Type</div>
                    <div class="info-value">N/A</div>
                </div>
            </div>
        {%  endif %}

        <!-- Barcode Area -->
        <div class="barcode-image">
        </div>
    </div>
</body>
</html>